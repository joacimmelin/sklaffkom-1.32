2025-08-20

Merged old and new changelog into this file. // JM

v1.33 beta 3, Thursday August 21 2025 PL

	* Help files hopefully works for commands with more than one
	  underscore now (a 30 year old bug finally fixed?)

v1.33 beta 2, tisdag 18:e augusti 18:55:

So many changes here, sorry only in Swedish for now :

Kända buggar :

Lite skakig UTF8 i editorn fortfarande - väldigt inkonsekvent så det är svårt att felsöka, men det pågår...
Skräptecken uppstår ibland vid tex signal när nån annan loggar in, skall undersökas.
Kommandot "hjälp" funkar sådär, snart åtgärdart. Debug avslaget igen ;).

Nya funktioner :

UTF-8 stöds och aktiveras genom flagga (i nuläget avstängd "by default").
Snyggare prompt (enligt mig) - kan numera ändras i sklaff.h (#define PROMPT).
Skärmlängden ska nu detekteras automatiskt och inställningen behålls session ut. Funkar inte detta finns även ett nytt kommando nedan.
Nytt kommando - Ändra skärmlängd (OBS! glöm ej att kopiera /etc/parse.eng och /etc/parse.swe, samt hjälpfilerna "mod_numlines" för respektive språk (även nethack ligger bland hjälpfilerna nu).
Färger stöds via ny flagga (ANSI), dock är ej färgläggningen färdig (tog mig friheten att låna delta citys färgschema sålänge hehe).

Buggfixar :

fixat citering vid usenet-inlägg (tror jag).
Mailtoss förstår nu att spoolen ofta är tom och loggar inte längre det "felet".
Makefile kopierar nu också newstoss och mailtoss till /usr/local/bin så man inte glömmer det.
Makefile : "make distrib" uppdaterad till modern standard, skapar dist-filer i ./dist-katalogen. Bra att ha när man vill testköra utanför github ;).
Visar rätt antal texter i "lista möten" i brevlåda och möten.
Ett par småfixar i den engelska versionen.
Basen "krashar" inte längre om .plan-fil saknas.
Vi skapar nu usenet header i utgående post på ett mer robust sätt för att slippa fel i inews.
Fixade en egen bugg jag själv infört eftersom compilern klagade över unused variables om news-postning var avstängd.
Replace conf gav ibland segfault när man mailade användare utanför sklaffkom, nu fixat.

Övrigt :

uppdaterat versionsnumret till 1.33-beta2.
Visar riktigt namn i usenet-header och "footer" (när den infon finns, dvs typ jämt).
Strippar onödiga tecken i författarens namn på usenet-inlägg.
Avkodar "=?UTF-8?B?...?=...." strängar i namn och subject på usenet-inlägg.
Ändlöst antal småfixar gör nu att vi kan behålla "-werror" även vid kompilering på linux.
Ett antal fixar som förebygger segfault och istället visar rimliga felmeddelanden.

------

Sat Jan 11 17:01:21 1997  Olof Runborg  <olofr@c2m2-12.nada.kth.se>

	* survreport.c (argv): 

	* Fixed a bug in the file locking. Under SOLARIS files
	were not locked properly, which e.g. resulted in a loss of
	survey replies when two users took the same survey at
	the same time. Question mark remains as to whether the 
	file locking works under Linux.

	* Made some minor changes in the handling of the
	at command (for survey reports).

	* Added code in survreport.c to change ownership
	and group of survey reports.

Thu Jan  9 15:58:01 1997  Olof Runborg  <olofr@c2m2-12.nada.kth.se>

	* Version 1.28 released.

	* edit.c (mailrec;): Added help text for surveys.

	* survreport.c (argv): New separate program that
	reports surveys. Moved summary information report
	to this program. Handle survery reporting via at
	command.

	* During readsome and readall, users are not prompted
	for survey replies.

Sat Jan  4 20:30:41 1997  Olof Runborg  <olofr@c2m2-12.nada.kth.se>

	* sklaffadm.c (argv): Exclude surveys when the sklaffadm
	'purge' command is run. Surveys are not deleted.

	Earlier: 

	- Fixed a bug that crashed the system when very
	  long mail addresses were used.
	- Added the "result" command for displaying full
	  survey results (raw data).
	- Made survey reports in summary form, for the different
	  question types.

Thu Jan  2 16:10:46 1997  Olof Runborg  <olofr@c2m2-12.nada.kth.se>

	* Ported SklaffKOM to Solaris systems.

	* Version 1.27, added surveys. New file: survey.c. Fixed
	a bug in edit.c; messages sent from within the editor were
	converted to lower case.

Sun Dec 22 14:28:16 1996  S|derKOM administration  <sklaff@skom.skom.se>

	* Reinvented the wheel. The cmd_answermsg() function didn't take
	into account that the found message could be one that you sent
	yourself. This I fixed in a version that I never released officially,
	so I can't blame anyone except myself. Anyways, here is 1.27.

Sun Dec 22 09:23:57 1996  Peter Lindberg  <peter@skom.skom.se>

	* Bunch of stuff added for surveys. Released as 1.26.

Sun Dec  8 17:35:54 1996  S|derKOM administration  <sklaff@skom.skom.se>

	* commands.c (cmd_read_last_text): Added this function which
	simply displays the 'last' read new text.

	* msg.c (display_msg): If the Presbeep flag is set, 'I' messages
	doesn't beep. This is due to a request from the impossible man,
	although the semantics for the flag is freaked out.
	Also made the list interruptible.

	* commands.c (cmd_answermsg): Fixed so that it answers to the
	right user, i.e. the one from which the LAST RECEIVED 'SAY' was
	from, not the last message regardless of type.

Sat Dec  7 21:20:37 1996  S|derKOM administration  <sklaff@skom.skom.se>

	* msg.c: Added a guard in list_mlist() so that max never is too
	high, which can cause enormous swapping.

	* Released versions 1.23 and 1.24. Added commands for displaying
	the last received and sent say/shout/I messages. Also extended
	the buffer so that it can 'remember' an unlimited number of
	messages. It makes the users happy.

Sun Nov 24 19:50:50 1996  S|derKOM administration  <sklaff@skom.skom.se>

	* Time to start all over. The old ChangeLog hadn't been updated
	for years. Anyway, I have now fixed the bug that made sklaff
	crash when requesting help for certain commands. Then I added
	the URL field in the user information and finally added the toy
	command "from". I also made some commands silent when used in
	the "login scripts".


19 Aug 1993	      * SklaffKOM v1.00 released.

20 Aug 1993		All "system" changed to "execl" for security
			reasons.  Minor cosmetic fixes.  New #defines
			in sklaff.h for program options.

21 Aug 1993		Wordwrap when in "say"-mode.

22 Aug 1993		Fixed bug in "unread tree" when text was moved
			from another conference.

23 Aug 1993		Fixed bug when compiling for BSD. Variable
			oldmask should be called oldsigmask. Several
			places. Changed add_active to look for dead
			users before adding self. Cleared msg-file at
			every login.

27 Aug 1993		Fixed bug in cmd_goto_text when text does not
			exist.

29 Aug 1993		Fixed bug i parse.c when two commands gave
			full hits. Fixed bug in edit.c concerning
			"move text".

30 Aug 1993		Fixed bug concering variable Last_text. Now
			it is changed only if the text exists. Also
			fixed bug in next_text, it had problem finding
			the right text if the next one was deleted.
			Fixed bug in editor, when changing a line you
			had one character less available on the line.

1 Sep 1993		Fixed bug in "resume_aborted_edit". Sometimes
			the text resumed was added to the wrong confernce.
			Added "ULTRIX"-define for compilation.

2 Sep 1993	      *	SklaffKOM v1.01 released.

4 Sep 1993	        Fixed bug in list_confs concering (F)-flag.

9 Sep 1993		Fixed bug i cmd_download, wildcards didn't work.

22 Sep 1993		Changed signal handling, suspects bug. Changed
			ULTRIX define to not equal LINUX. Changed length
			of say/yell messages to one character shorter.

30 Sep 1993		Changed getwd/getcwd compilation defines.

5 Oct 1993		Added cls before text flag.

10 Nov 1993		Fixed bug when redisplaying other peoples letters.

12 Nov 1993		Fixed textnumber check in cmd_unread_text.

28 Nov 1993		Comments no longer allowed i database-files.
			sscanf removed from buf.c and custom routines
			used instead.

2 Feb 1994              Added paydate to sklaffrc-struct.  Addes support
                        in sklaffadm-program to set paydate and some 
                        code in cmd_show_status, list_user, and some
                        added functionality in sklaffadm userlist.

xx Mar 1994	      *	Here a lot has happened, a zillion fixed during
                        the last month, a bunch on new commands and
                        support for news and email.  1.10 released.

9 March 1996		Well, I sort of forgot to update this file, but
                        a lot of bugfixes and some new commands. 1.11
			released.
